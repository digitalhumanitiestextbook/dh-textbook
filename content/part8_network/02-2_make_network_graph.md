---
title: 나의 첫 네트워크 그래프 만들기 (가상 데이터 활용)
---

<!-- colab-button:start -->
<div class="colab-button">
  <a
    href="https://colab.research.google.com/github/digitalhumanitiestextbook/dh-textbook/blob/main/notebooks/part8_ai/03_gen_ai_llm.ipynb"
    target="_blank"
    rel="noopener"
  >
    Colab에서 실행하기
  </a>
</div>
<!-- colab-button:end -->

## 2.2. 나의 첫 네트워크 그래프 만들기 (가상 데이터 활용)

이론은 충분히 배웠으니, 이제 직접 손을 더럽힐 시간입니다. 이번 섹션에서는 실제 '프렌즈' 대본 파일을 파싱하는 복잡한 과정에 앞서, 우리의 머릿속에 있는 지식을 바탕으로 아주 간단한 '가상 네트워크'를 처음부터 끝까지 만들어보는 연습을 하겠습니다. 이는 마치 복잡한 건축을 하기 전에, 벽돌 한 장을 쌓고 시멘트를 발라보는 것과 같은 핵심적인 기초 훈련입니다.

이 과정을 통해 우리는 빈 네트워크 '캔버스'를 펼치고, 그 위에 점(노드)을 찍고, 점들을 선(엣지)으로 연결하고, 나아가 각 점과 선에 고유한 '속성'을 부여하는 NetworkX의 가장 기본적인 문법과 작동 원리를 체득하게 될 것입니다.

---

### 2.2.1. 빈 그래프 객체 생성: nx.Graph() 와 nx.DiGraph()

모든 그림이 빈 캔버스에서 시작되듯, 모든 네트워크 분석은 빈 **그래프 객체(Graph Object)**를 생성하는 것에서 시작합니다. '객체'라는 단어가 생소할 수 있지만, 지금은 단순히 우리의 네트워크에 대한 모든 정보(노드, 엣지, 속성 등)를 담아둘 하나의 '빈 바구니' 또는 '파일 폴더'라고 생각하시면 편합니다.

NetworkX에서는 `nx.Graph()` 함수를 사용하여 이 빈 바구니를 만듭니다. 우리는 보통 이 바구니에 `G`라는 이름을 붙여줍니다.

아래 코드는 'G'라는 이름의 빈 그래프 객체를 생성하는 코드입니다.

```
import networkx as nx
G = nx.Graph()
```

* `import networkx as nx`: 이전 섹션에서 배운 대로, NetworkX 라이브러리를 `nx`라는 별명으로 우리 작업 공간에 불러옵니다. 이 코드는 노트북에서 작업을 시작할 때 항상 맨 처음에 한 번 실행해주어야 합니다.
* `G = nx.Graph()`: NetworkX(`nx`)가 제공하는 기능 중 `Graph()`라는 함수를 호출하여, 방향성이 없는(undirected) 빈 그래프 객체를 하나 만들어 `G`라는 변수(바구니)에 할당하라는 의미입니다.

만약 관계의 방향이 중요한 방향 그래프(directed graph)를 만들고 싶다면, `nx.DiGraph()` 함수를 사용하면 됩니다. (`DiGraph`는 **Di**rected **Graph**의 약자입니다.)

```
G_directed = nx.DiGraph()
```

일단 우리는 '프렌즈' 친구 관계처럼 상호적인 관계를 다룰 것이므로, `nx.Graph()`를 중심으로 실습을 진행하겠습니다.

---

### 2.2.2. 노드(Node) 추가하기

빈 캔버스가 준비되었으니, 이제 점을 찍을 차례입니다. 네트워크에 노드를 추가하는 방법은 크게 두 가지입니다.

#### 2.2.2.1. 개별 노드 추가: G.add_node()

한 번에 하나씩 노드를 추가할 때는 `.add_node()` 메소드(객체에 속한 함수)를 사용합니다. `G`라는 우리의 그래프 객체에 '모니카'라는 이름의 노드를 추가해 보겠습니다.

아래 코드를 실행해 보세요.

```
G.add_node("Monica")
```

이제 `G`라는 바구니 안에는 '모니카'라는 이름표가 붙은 구슬이 하나 담기게 되었습니다.

#### 2.2.2.2. 여러 노드 동시 추가: G.add_nodes_from()

'프렌즈'의 주인공 여섯 명을 한 명씩 추가하는 것은 번거롭습니다. 여러 개의 노드를 한 번에 추가하고 싶을 때는, 노드 이름들을 파이썬의 **리스트(list)** 자료형으로 묶은 뒤 `.add_nodes_from()` 메소드를 사용하면 편리합니다.

아래 코드는 주인공 6명의 이름을 리스트로 만들고, 이들을 한 번에 노드로 추가하는 예시입니다.

```
character_list = ["Rachel", "Ross", "Chandler", "Joey", "Phoebe"]
G.add_nodes_from(character_list)
```

* `character_list = [...]`: `[...]`는 파이썬에서 여러 항목을 순서대로 담는 리스트 자료형입니다. 6명의 캐릭터 이름을 문자열(`""`로 감싼 텍스트)로 만들어 `character_list`라는 변수에 담았습니다.
* `G.add_nodes_from(...)`: `G` 그래프에, 리스트(`character_list`) 안에 있는 모든 항목들로부터(`from`) 노드들을 추가하라는 의미입니다. 이 코드를 실행하면, 앞서 추가한 'Monica' 외에 나머지 5명의 노드가 `G`에 한꺼번에 추가됩니다.

---

### 2.2.3. 노드 속성(Attribute) 부여하기

노드는 단순히 이름표가 전부가 아닙니다. '프렌즈'의 각 캐릭터들이 직업, 성별, 성격 등 다양한 특징을 갖는 것처럼, 네트워크의 노드에도 다양한 **속성(attribute)** 정보를 부여할 수 있습니다. 이렇게 저장된 속성은 나중에 네트워크를 분석하거나 시각화할 때 매우 유용하게 사용됩니다. (예: '직업'에 따라 노드 색상을 다르게 칠하기)

#### 2.2.3.1. 노드 추가 시 속성 부여

`.add_node()`를 사용할 때, 노드 이름과 함께 'key=value' 형태로 속성을 바로 추가할 수 있습니다. 예를 들어, 피비에게 'Musician'이라는 직업 속성을 부여해 봅시다.

```
G.add_node("Phoebe", occupation="Musician")
```

#### 2.2.3.2. 기존 노드에 속성 추가/수정

이미 만들어진 노드에 속성을 추가하거나 수정할 수도 있습니다. `G.nodes`는 그래프의 모든 노드 정보를 담고 있는 딕셔너리(사전)와 유사하게 작동합니다.

아래 코드는 기존의 'Phoebe' 노드에 'gender'라는 속성을 추가하는 예시입니다.

```
G.nodes["Phoebe"]["gender"] = "Female"
```

* `G.nodes["Phoebe"]`: `G`의 노드들 중 'Phoebe'라는 노드를 선택합니다.
* `["gender"] = "Female"`: 'Phoebe' 노드에 'gender'라는 이름의 속성 칸을 만들고, 그 안에 "Female"이라는 값을 넣으라는 의미입니다.

---

### 2.2.4. 엣지(Edge) 추가하기

이제 점들을 선으로 연결할 차례입니다. 엣지를 추가하는 방식도 노드와 매우 유사합니다.

#### 2.2.4.1. 두 노드 간 엣지 추가: G.add_edge()

두 노드를 연결하는 엣지 하나를 추가할 때는 `.add_edge()` 메소드를 사용합니다. '모니카'와 '레이첼'은 오랜 친구 사이이므로, 두 노드를 연결해 봅시다.

```
G.add_edge("Monica", "Rachel")
```

이 코드는 `G` 그래프에 'Monica' 노드와 'Rachel' 노드를 잇는 선 하나를 추가하라는 의미입니다.

#### 2.2.4.2. 여러 엣지 동시 추가: G.add_edges_from()

여러 개의 엣지를 한 번에 추가할 때는, 연결할 노드 쌍들을 **튜플(tuple)** `(노드1, 노드2)` 형태로 묶어 리스트 안에 담은 뒤 `.add_edges_from()`을 사용합니다. 예를 들어, 룸메이트 관계였던 (모니카, 피비), (챈들러, 조이)를 엣지로 추가해 봅시다.

```
edge_list = [("Monica", "Phoebe"), ("Chandler", "Joey")]
G.add_edges_from(edge_list)
```

---

### 2.2.5. 엣지 속성(Attribute) 및 가중치(Weight) 부여하기

엣지 역시 단순한 선이 아니라, 관계의 종류나 강도 같은 속성을 가질 수 있습니다.

#### 2.2.5.1. 엣지 추가 시 속성/가중치 부여

`.add_edge()`를 사용할 때, 두 노드 이름과 함께 속성 정보를 'key=value' 형태로 추가할 수 있습니다. 예를 들어, '모니카'와 '챈들러'는 '부부' 관계이며, 그 관계의 강도(가중치, weight)를 임의로 10이라고 부여해 보겠습니다.

```
G.add_edge("Monica", "Chandler", relationship="Spouse", weight=10)
```

* `relationship="Spouse"`: 이 엣지는 '부부' 관계임을 나타내는 속성입니다.
* `weight=10`: 이 엣지의 가중치는 10입니다. `weight`는 NetworkX에서 특별하게 취급되는 속성 이름으로, 관계의 강도를 나타낼 때 관례적으로 사용합니다.

#### 2.2.5.2. 기존 엣지에 속성/가중치 추가/수정

노드와 마찬가지로, `G.edges`를 통해 기존 엣지의 속성을 추가하거나 수정할 수 있습니다.

```
G.edges[("Monica", "Rachel")]["relationship"] = "Childhood Friend"
```

이것으로 우리는 NetworkX를 사용하여 무(無)에서부터 우리만의 작은 관계망을 만드는 모든 기본 기술을 배웠습니다. 다음 섹션에서는 이렇게 만들어진 네트워크의 기본 정보를 확인하는 방법을 알아보겠습니다.

> **🤖 AI와 함께 탐색하기 #8: 설명문으로 나만의 미니 네트워크 구축하기**
>
> **학습 목표:** 자연어 설명을 바탕으로, 배운 내용을 총동원하여 노드와 엣지를 생성하고 속성을 부여하는 종합적인 코드를 구성하는 능력을 기릅니다.
>
> **간단 프롬프트:**
> `등장인물 '해리', '론', '헤르미온느'가 있어. 세 사람은 모두 서로 친구야. 이 관계를 NetworkX 코드로 만들어줘.`
>
> **상세 프롬프트:**
> `다음 설명을 바탕으로 NetworkX 코드를 생성해줘.
> 1. 빈 무방향 그래프 G를 생성해.
> 2. '해리', '론', '헤르미온느'라는 3명의 노드를 추가해.
> 3. 각 노드에 'house'라는 속성을 부여해. 세 명 모두 'Gryffindor'야.
> 4. 세 사람은 모두 서로 친구 관계이므로, 3개의 엣지(해리-론, 론-헤르미온느, 헤르미온느-해리)를 추가해.
> 5. 각 엣지에 'relationship' 속성을 'friend'로 부여해.
> 6. 특히 해리와 론의 관계는 'best friend'이므로, 이 엣지에만 'type' 속성을 'best'로 추가해줘.`
>
> **인문학적 프롬프트:**
> `우리가 지금 만든 가상의 '프렌즈' 네트워크는 우리의 '기억'과 '상식'에 기반한 것이지, 실제 대본 데이터에서 추출한 게 아니야. 이렇게 연구자가 사전에 가진 지식(prior knowledge)으로 데이터를 '만드는' 행위는 디지털 인문학 연구에서 어떤 의미를 가질까? 이러한 방식이 가져올 수 있는 잠재적 '통찰'과 심각한 '왜곡'의 가능성에 대해, 그리고 이를 방지하기 위해 연구자가 가져야 할 태도에 대해 논해줘.`